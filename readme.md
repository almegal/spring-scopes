# Изучение областей видимости в контексте spring и шаблонизатора thymeleaf
 Учебный проект со страницей логина и основной страницы после аутентификации.

Изученно принципы работы контекстов в веб-контекстах
#### Примеры с аутентификацией наподобие того, что находится в этом проекте, а также логика в контроллерах, отлично подходят для учебных целей. Но в реальных приложениях - нет
Понимание работы областей видимости бинов с анотациями [@RequestScope] [@SessionScope] и [@ApplicationScope]


В проекте используется зависимости:
- spring/sptring-boot
- thymeleaf

## РЕЗЮМЕ

- Кроме одиночной и прототипной, в веб- приложениях Spring доступны еще три области видимости бинов.
Они применимы только в веб-приложениях, и поэтому их называют областями веб-видимости:
>- область видимости в рамках запроса — Spring создает новый экземпляр бина для каждого HTTP-запроса;
>- область видимости в рамках сессии — Spring создает новый экземпляр бина длякаждойHTTP-сессииконкретногоклиента Этотэкземплярдоступен для всех запросов данного клиента в рамках данной сессии;
>- область видимости в рамках приложения — во всем приложении может существовать только один экземпляр такого бина Этот экземпляр до- ступен для всех запросов от всех клиентов

- Spring гарантирует, что экземпляр бина с областью видимости в рамках запроса доступен только для данного HTTP-запроса.
Поэтому можно смело использовать его атрибуты, не беспокоясь о проблемах конкурентности.
Можно также не думать о том, что такие экземпляры займут всю память приложения: их время жизни очень коротко и они попадают в сборку мусора сразу же после завершения выполнения HTTP-запроса.
- Spring создает экземпляры бинов с областью видимости в рамках запроса для каждого HTTP-запроса, что происходит весьма часто.
Поэтому не рекомендуется усложнять процесс за счет использования логики в конструкторе или в методе @PostConstruct
- Экземпляры бинов с областью видимости в рамках сессии Spring связывает с конкретной HTTP-сессией клиента Таким образом, их можно использовать для совместного доступа к данным для нескольких HTTP-запросов от одного и того же клиента
- Но даже один и тот же клиент может отправлять конкурентные HTTP- запросы.
Если такие запросы изменяют данные, хранящиеся в экземпляре бина с областью видимости в рамках сессии, это может привести к состоянию гонки.
Необходимо учитывать возможность подобных ситуаций и либо избегать их, либо синхронизировать код, чтобы поддерживать конкурентность
- Рекомендую по возможности не использовать бины с областью видимости в рамках приложения.
Такие бины доступны для всех запросов веб- приложения, поэтому любая операция записи, скорее всего, будет нуждаться в синхронизации.
Это приведет к образованию узких мест и значительно снизит производительность приложения Более того, такие бины хранятся в памяти приложения в течение всего времени жизни приложения и не попадают в сборку мусор.
Лучше хранить данные непосредственно в базе данных
- При использовании бинов с областями видимости в рамках сессии и в рамках приложения запросы становятся менее независимыми.

Материал для изучения взят из книги: 
**Spring быстро Лауренциу Спилкэ**